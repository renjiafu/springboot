<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.rjf.mapper.StudentDao">


    <!--student对象-->
    <resultMap id="Base_Student" type="Student" autoMapping="true">
        <id column="stu_id" property="stuId" jdbcType="INTEGER"/>
        <result property="stuName" column="stu_name" jdbcType="VARCHAR"/>
        <result property="clsId" column="cls_id" jdbcType="INTEGER"/>
<!--
        <association  property="cls" javaType="Cls" autoMapping="true">
           <id column="cid" property="cid" jdbcType="NUMERIC"/>
        </association>
-->
    </resultMap>


    <!--单查询-->
    <select id="getStudentById" resultMap="Base_Student">
        select  * from student where stu_id=#{stuId}
    </select>

    <!--多查询-->
    <select id="getStudentByStudent" resultMap="Base_Student">
        select
            stu_id,
            stu_name,
            password,
            birthday,
            cls_id
        from student s
        <where>
            <if test="stuId !=null">
                and s.stu_id=#{stuId}
            </if>
            <if test="stuName !=null">
                and s.stu_name=#{stuName}
            </if>

        </where>
    </select>

    <!--列表查询-->
    <select id="getStudentList" resultMap="Base_Student">
        select * from student limit #{index},#{pageSize}
    </select>

    <!--增添-->
    <insert id="insertStudent" >
        insert into student
        (stu_id,stu_name,password,birthday,cls_id)
        values(
        #{stuId},
        #{stuName},
        #{password},
        #{birthday},
        #{clsId}
        )
    </insert>

    <!--更新-->
    <update id="updateStudent">
        update student
        <set>
            <if test="stuName != null">
                stu_name = #{stuName},
            </if>
           <if test="password != null">
               password = #{password},
            </if>

        </set>
        where stu_id = #{stuId}
    </update>

    <!--删除-->
    <delete id="deleteStudent">
        delete from student
        where stu_id in
        <foreach collection="list" item="id"  open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>


</mapper>